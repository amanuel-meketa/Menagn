<!-- Header + Create CTA -->
<header class="instance-header">
  <div class="header-left">
    <div class="title-block">
      <h2 class="page-title">App Templates</h2>
    </div>
  </div>

  <div class="header-center">
    <label class="header-search">
      <i nz-icon nzType="search" class="filter-icon"></i>
      <input nz-input placeholder="Search templates..." [(ngModel)]="searchQuery" />
    </label>
  </div>

  <div class="header-right">
    <div class="create-wrap">
      <app-app-template-create></app-app-template-create>
    </div>
  </div>
</header>

<!-- Grid -->
<main class="template-list">
  <ng-container *ngIf="filteredTemplates().length; else empty">
    <nz-card *ngFor="let data of filteredTemplates()" class="template-card" nzHoverable>
      <div class="card-visual">
        <div class="avatar-bg">{{ data.name ? (data.name | slice:0:1) : 'A' }}</div>
        <div class="visual-meta">
          <a [routerLink]="['/app-template-details', data.templateId]" class="template-link template-link--card">{{ data.name }}</a>
        </div>
        
        </div>
     <div class="card-body">
        <p class="template-desc" *ngIf="data.description">{{ data.description }}</p>
<nz-tag [nzColor]="data.isActive ? 'green' : 'default'" class="status-tag small visual-tag">{{ data.isActive ? 'Active' : 'Inactive' }}</nz-tag>
   
    
        <div class="card-bottom">
          <div class="stats">
            <div class="stat-item">
              <span class="stat-value">{{ data.activeInstances || 0 }}</span>
              <span class="stat-label">Active</span>
            </div>
            <div class="stat-item">
              <span class="stat-value">{{ data.totalInstances || 0 }}</span>
              <span class="stat-label">Total</span>
            </div>
          </div>

          <div class="actions">
            <app-template-stages [templateId]="data.templateId"></app-template-stages>
            <button nz-button nzType="link" nzSize="small" [routerLink]="['/app-template-update', data.templateId]">Form</button>
            <button nz-button nzType="link" nzDanger nzSize="small" (click)="deleteTemplate(data.templateId)">Delete</button>
          </div>
        </div>
      </div>
    </nz-card>
  </ng-container>

  <ng-template #empty>
    <p class="empty">No templates found</p>
  </ng-template>
</main>
