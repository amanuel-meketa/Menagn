<div class="template-header">
  <app-app-template-create></app-app-template-create>
</div>

<div class="template-list">
  <ng-container *ngFor="let data of listOfData">
    
    <!-- Card Actions -->
    <ng-template #stages>
      <app-template-stages [templateId]="data.templateId"></app-template-stages>
    </ng-template>
    
    <ng-template #edit>
      <button nz-button nzType="link" nzSize="small">
        <span nz-icon nzType="edit" class="mr-4"></span> Form 
      </button>
    </ng-template>

    <ng-template #delete>
      <button nz-button nzType="link" nzDanger nzSize="small" (click)="deleteTemplate(data.templateId)">
        <span nz-icon nzType="delete"></span> Delete
      </button>
    </ng-template>

    <!-- Description -->
    <ng-template #description>
      <div class="template-stats">
        <div class="stat-row">
          <span><span nz-icon nzType="play-circle" class="stat-icon active"></span><strong>Active Instances:</strong></span>
          <span class="stat-value">{{ data.activeInstances || 0 }}</span>
        </div>
        <div class="stat-row">
          <span><span nz-icon nzType="profile" class="stat-icon total"></span><strong>Total Instances:</strong></span>
          <span class="stat-value">{{ data.totalInstances || 0 }}</span>
        </div>
        <div class="stat-row">
          <nz-tag [nzColor]="data.isActive ? 'green' : 'default'" class="status-tag">
            {{ data.isActive ? 'Active' : 'Inactive' }}
          </nz-tag>
        </div>
      </div>
    </ng-template>

    <!-- Title -->
    <ng-template #title>
      <div class="template-title">
        <span nz-icon nzType="cluster" class="title-icon"></span>
        <a [routerLink]="['/app-template-details', data.templateId]" class="template-link">
          {{ data.name }}
        </a>
      </div>
    </ng-template>

    <!-- Card -->
    <nz-card class="template-card"
             [nzActions]="[stages, edit, delete]"
             [nzBodyStyle]="{ padding: '16px 24px' }">
      <nz-card-meta [nzTitle]="title" [nzDescription]="description"></nz-card-meta>
    </nz-card>
  </ng-container>
</div>
